{% assign sid = section.id %}
<style>
  #shopify-section-{{ sid }} .event_section-container{
    background:{{section.settings.bg}};
    padding:{{section.settings.margin}};
  }
  #shopify-section-{{ sid }} .text_block_heading{
    text-align: center;
    font-size: 40px;
    font-style: normal;
    font-weight: 700;
    line-height: 1.2;
    margin-bottom:48px;
  }

  #shopify-section-{{ sid }} .block-subscription{
    /* margin-top:48px; */
    position:relative;
    border-radius:16px;
    overflow:hidden;
    background:var(--bgi);
    background-size: cover;
  }
  #shopify-section-{{ sid }} .subform {
    margin-top: 24px;
    padding: 0 10px;
  }
  #shopify-section-{{ sid }} .block-subscription_inner {
    max-width:560px;
    margin:0 auto;
    padding: 9% 0px;
  }
  #shopify-section-{{ sid }} .block-subscription .heading {
    font-size: 40px;
    font-weight: 700;
    text-align:center;
    line-height: 1.2;
  }
  #shopify-section-{{ sid }} .block-subscription .desc {
    font-size: 20px;
    font-weight: 400;
    line-height: 1.4;
    text-align:center;
    margin-top:16px;
    padding: 0 20px;
  }
  #shopify-section-{{ sid }} .block-subscription .newsletter-form__field-wrapper {
    display:flex;
    gap:8px;
  }
  #shopify-section-{{ sid }} .block-subscription .form-input-placeholder {
    height: 40px;
    background: #f5f5f7;
  }
  #shopify-section-{{ sid }} .block-subscription .newsletter-form__button {
    max-width:200px;
    background:#5216fc;
    color:#fff;
    border-color:#5216fc;
    border-radius: 4px;
    height: 40px;
    font-size: 16px;
    font-style: normal;
    font-weight: 600;
    line-height: normal;
    padding: 0;
  }
  @media only screen and (min-width: 2000px){
    #shopify-section-{{ sid }} .text_block_heading{
      font-size: 2.08vw;
      margin-bottom:2.5vw;
    }
    #shopify-section-{{ sid }} .block-subscription .heading {
      font-size: 2.08vw;
    }
    #shopify-section-{{ sid }} .block-subscription .desc {
      font-size: 1.04vw;
      margin-top:0.84vw;
      padding: 0 1.04vw;
    }
    #shopify-section-{{ sid }} .block-subscription .newsletter-form__field-wrapper {
      gap:0.41vw;
    }
    #shopify-section-{{ sid }} .block-subscription .form-input-placeholder {
      height: 2.08vw;
      font-size: .84vw;
    }
    #shopify-section-{{ sid }} .block-subscription .newsletter-form__button {
      height: 2.08vw;
      max-width:10.41vw;
      font-size: .84vw;
    }
    #shopify-section-{{ sid }} .subform {
      margin-top: 1.25vw;
      padding: 0 0.52vw;
    }
    #shopify-section-{{ sid }} .block-subscription_inner {
      max-width:29.16vw;
    }
  }
  @media only screen and (max-width: 991px){
    #shopify-section-{{ sid }} .event_section-container{
      padding:{{section.settings.mbmargin}};
    }
    #shopify-section-{{ sid }} .text_block_heading{
      margin-bottom:16px;
      font-size:24px;
      
    }
    
    #shopify-section-{{ sid }} .block-subscription{
      /* margin-top: 16px; */
      background:var(--bgim);
      background-size: cover;
    }
    #shopify-section-{{ sid }} .block-subscription .heading {
      font-size: 28px;
      font-weight: 700;
      line-height:1.28;
    }
    #shopify-section-{{ sid }} .block-subscription .desc {
      font-size: 16px;
      margin-top:8px;
    }
    #shopify-section-{{ sid }} .block-subscription .newsletter-form__button {
      max-width:130px;
      height: 40px;
    }
  }
</style>
<div class="event_section-container">
  <div class="container-1570">
    <div class="event_section-wrapper" style="{% if section.settings.img_bg != blank %}background:url({{ section.settings.img_bg | img_url:'master' }}) no-repeat center; background-size:cover; {% else %}background:{{ section.settings.content_bg }}{% endif %}">
      {% if section.settings.Product_block_heading != blank  %}
        <div class="text_block_heading" style=" color:{{ section.settings.Product_block_heading-color }}">{{ section.settings.Product_block_heading }}</div>
      {% endif %}
      {% for block in section.blocks %}
        {% case block.type %}
          {% when 'subscription' %}
            <div class="event-section-block block-subscription" style=" --bgi:url({{ block.settings.img | img_url: 'master' }}) no-repeat center; --bgim:url({{ block.settings.image_mb | img_url: 'master' }}) no-repeat center;">
              <div class="block-subscription_inner">
                {% if block.settings.title != blank %}
                <div class="heading {% if settings.banner_animation == 'effect_fade_up' %} scroll-trigger animate--slide-in{% endif %}" style="color:{{ block.settings.title_color }}; {% if settings.banner_animation == 'effect_fade_up' %}--animation-order: 1;{% endif %}">
                  {{ block.settings.title }}
                </div>
                {% endif %}
                {% if block.settings.content != blank %}
                  <div class="desc {% if settings.banner_animation == 'effect_fade_up' %} scroll-trigger animate--slide-in{% endif %}" style="color:{{ block.settings.caption_color }}; {% if settings.banner_animation == 'effect_fade_up' %}--animation-order: 2;{% endif %}">{{ block.settings.content }}</div>
                {% endif %}
                <div class="subform">
                  {% assign show_input_field = true %}
                  {% assign input_placeholder = 'Enter You Email' %}
                  <div class="section-form-wrapper text-{{ section_text_align }} width-behavior-{{ block.settings.input_width_behavior }}{% if input_style == 'style_2' %} input_style_2{% endif %}{% if settings.banner_animation == 'effect_fade_up' %} scroll-trigger animate--slide-in{% endif %}"{% if settings.banner_animation == 'effect_fade_up' %} style="--animation-order: 3;"{% endif %}>
                    <newsletter-form class="newsletter-section-form newsletter-section-block">
                      {%- form 'customer', id: 'NewsletterSection', class: 'newsletter-block newsletter-form' -%}
                        <input type="hidden" name="contact[tags]" value="newsletter">
                        <div class="newsletter-form__field-wrapper" style="--placeholder-color: #727273;--input-background: #f5f5f7;--input-border-color: ;--form-gap: {{ form_gap }};--input-max-width: {{ block.settings.input_width | append: 'px' }};--input-text-font-size: {{ block.settings.input_text_font_size |append: 'px' }};--input-border-radius: {{ block.settings.input_border_radius | append: 'px' }}">
                          {%- if show_input_field -%}
                            <div class="field">
                              <label class="field__label hiddenLabels" for="NewsletterForm--{{ section.id }}">{{ 'newsletter.label' | t }}</label>
                              <input id="NewsletterForm--{{ section.id }}" type="email" name="contact[email]" class="field__input form-input-placeholder" value="{{ form.email }}" aria-required="true" autocorrect="off" autocapitalize="off" autocomplete="email"{% if form.errors %} autofocus aria-invalid="true" aria-describedby="ContactFooter-error"{% elsif form.posted_successfully? %} aria-describedby="ContactFooter-success" {% endif %} placeholder="{{ input_placeholder }}" required="required">
                              <!-- <div class="effect_placeholder"><span class="input_placeholder" style="font-size: var(--input-text-font-size, var(--font-body-size));{% if input_style == 'style_2' %}font-weight: 700;{% endif %}">{{ input_placeholder }}</span></div> -->
                            </div>
                          {%- endif -%}
                          <button {% unless show_input_field %}data-open-newsletter-popup{% endunless %} type="{% if show_input_field %}submit{% else %}button{% endif %}" class="button newsletter-form__button" name="commit" id="Subscribe-{{ section.id }}" aria-label="{{ 'newsletter.button_label' | t }}" style="--button-width: {{ button_width }};--button-font-size: {{ button_font_size }};--button-text-color: {% if button_text_color != blank %}{{ button_text_color }}{% endif %};--button-border-color: {% if button_border_color != blank %}{{ button_border_color }}{% endif %};--button-background: {% if button_gradient_color != blank %}{{ button_gradient_color }}{% elsif button_background_color != blank %}{{ button_background_color }}{% endif %};--button-text-color-hover: {% if button_text_color_hover != blank %}{{ button_text_color_hover }}{% endif %};--button-border-color-hover: {% if button_border_color_hover != blank %}{{ button_border_color_hover }}{% endif %};--button-background-hover: {% if button_gradient_color_hover != blank %}{{ button_gradient_color_hover }}{% elsif button_background_color_hover != blank %}{{ button_background_color_hover }}{% endif %};--button-text-transform: {{ button_text_transform }};--button-font-weight: {{ button_font_weight }}">{% if settings.enable_button_1_border_outside %}<span>{% endif %}{{ 'newsletter.button_label' | t }}{% if settings.enable_button_1_border_outside %}</span>{% endif %}</button>
                        </div>
                        {%- if form.errors -%}
                          <div class="newsletter-form__message newsletter-form__message--error form__message" id="ContactFooter-error">
                            {% render 'icon-error' -%}
                            {{- form.errors.translated_fields.email | capitalize }}
                            {{ form.errors.messages.email }}
                          </div>
                        {%- endif -%}
                        {%- if form.posted_successfully? -%}
                          <script>
                            $(document).ready(function () {
                              let newsletterSuccessPopup = (function () {
                                let popup = $('.newsletter-success-modal');
                                let close = popup.find('.close');
                                let success = popup.find('.success');
                                let error = popup.find('.error');
                                let overlay = $('.background-overlay');
                                popup.show();
                                overlay.show();
                                error.hide();
                                success.show();
                                close.off('click').on('click', function () {
                                  popup.fadeOut();
                                  overlay.hide();
                                });
                                overlay.off('click').on('click', function () {
                                  popup.fadeOut();
                                  overlay.hide();
                                });
                              })();
                              let newURL = location.href.split('?')[0];
                              window.history.pushState('object', document.title, newURL);
                            });
                          </script>
                        {% else %}
                          <script>
                            $(document).ready(function () {
                              if (window.location.href.indexOf('newsletter&form_type=customer') > -1) {
                                let newsletterSuccessPopup = (function () {
                                  let popup = $('.newsletter-success-modal');
                                  let close = popup.find('.close');
                                  let success = popup.find('.success');
                                  let error = popup.find('.error');
                                  let overlay = $('.background-overlay');
                                  popup.show();
                                  overlay.show();
                                  error.show();
                                  success.hide();
                                  close.off('click').on('click', function () {
                                    popup.fadeOut();
                                    overlay.hide();
                                  });
                                  overlay.off('click').on('click', function () {
                                    popup.fadeOut();
                                    overlay.hide();
                                  });
                                })();
                                let newURL = location.href.split('?')[0];
                                window.history.pushState('object', document.title, newURL);
                              }
                            });
                          </script>
                        {%- endif -%}
                      {%- endform -%}
                    </newsletter-form>
                  </div>
                </div>
              </div>
            </div>
        {% endcase %}
      {% endfor %}
    </div>
  </div>
</div>

{% schema %}
  {
    "name": "Event subscription",
    "settings": [
      {
        "type": "color_background",
        "id": "bg",
        "label": "Background color of the section"
      },
       {
            "type": "image_picker",
            "id":"img_bg",
            "label":"Background image"
        },
      {
          "type": "text",
          "id": "Product_block_heading",
          "label": "heading",
        "default": "heading"
       },
      {
        "type": "color",
        "id": "Product_block_heading-color",
        "label": "Heading Color",
        "default": "#ffffff"
      },
       {
        "type": "text",
        "id": "margin",
        "label": "PC margin",
        "default": "100px 0 100px 0"
      },
      {
        "type": "text",
        "id": "mbmargin",
        "label": "mb margin",
        "default": "50px,,50px,"
      }
    ],
    "blocks": [
      {
        "type": "subscription",
        "name":"Subscription",
        "settings": [
          {
            "type": "image_picker",
            "id": "img",
            "label": "Image"
          },
          {
            "type": "image_picker",
            "id": "image_mb",
            "label": "Image (mobile)"
          },
          {
              "type": "textarea",
              "id": "content",
              "label": "Content",
              "default":"Product introductionProduct introductionProduct introductionProduct introduction "
          },
          {
              "type": "text",
              "id": "title",
              "label": "Title",
              "default":"subscription"
          },
           {
            "type": "color_background",
            "id": "bg",
            "label": "Background color",
            "default": "#fff"
          },
          {
            "type": "color_background",
            "id": "title_color",
            "label": "Title color",
            "default": "#000"
          },
          {
            "type": "color_background",
            "id": "caption_color",
            "label": "Content color",
            "default": "#000000a5"
          }
        ]
      }
    ],
    "presets": [
      {
        "name": "Event subscription"
      }
    ]
  }
{% endschema %}